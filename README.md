# Telegram Task Planner Bot

Этот проект содержит простой чат-бот для Telegram, 
который помогает планировать ежедневные задачи.

## Основные возможности

- Ежедневная отправка списка невыполненных задач по будням.
- Выбор задачи через кнопку.
- Добавление комментария и сохранение результата.
- Назначение тегов задачам.
- Просмотр текущих задач командой `/tasks` или `/list` в любое время.
- Фильтрация задач по категории, приоритету и тегам через `/filter`.
- Добавление новых задач через команду `/add` или кнопку в меню.
- Меню по команде `/start` с кнопками "Показать задачи" и "Добавить задачу".
- Настройка времени ежедневного напоминания и выключение напоминаний на выходные через `/settings`.

## Как запустить

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Создайте файл `.env` или задайте переменные окружения (этот файл добавлен в `.gitignore`):
   - `TOKEN` — токен вашего бота.
   - `OWNER_CHAT_ID` — ваш chat id в Telegram.
   - `DATABASE_URL` — строка подключения к PostgreSQL, например `postgresql+psycopg://user:pass@host:5432/dbname`.
3. Примените миграции перед запуском (при первом деплое и при обновлении схемы):
   ```bash
   alembic upgrade head
   ```
4. Запустите:
   ```bash
   python main.py
   ```

Задачи сохраняются в PostgreSQL. Схема описана в `alembic/versions/20241219_0001_initial_schema.py` и включает метки времени `created_at`/`updated_at`, приоритеты (0/1/2), статус задачи (`active`/`done`/`canceled`) и связи с категориями/тегами. При первом запуске для каждого нового пользователя без задач импортируются записи из шаблона `tasks_template.json` (расположен в корне проекта). Перед запуском отредактируйте этот файл, чтобы задать стартовый набор задач.
